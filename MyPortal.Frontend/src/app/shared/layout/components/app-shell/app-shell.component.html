<div class="flex flex-col h-[100dvh]">
  <app-topbar (menuToggle)="toggleSidebar()"></app-topbar>

  <div class="flex flex-1 min-h-0 relative">
    <app-sidebar
      class="transition-transform duration-200 overflow-auto
             w-72 min-w-72
             text-[var(--sidebar-fg)] bg-[var(--sidebar-bg)] border-r border-[var(--sidebar-border)] shadow-xl
             lg:static lg:translate-x-0
             fixed top-14 bottom-0 left-0 z-[1002]"
      [class.-translate-x-full]="!layout.isDesktop && !layout.sidebarOpen"
      (click)="$event.stopPropagation()">
    </app-sidebar>

    <!-- Main content -->
    <main class="flex-1 overflow-auto bg-[var(--p-surface-ground)] p-4 lg:p-6">
      <router-outlet></router-outlet>
    </main>

    <div
      *ngIf="!layout.isDesktop && layout.sidebarOpen"
      class="fixed inset-0 z-[1001] bg-black/40 lg:hidden"
      (click)="closeSidebar()"
      aria-hidden="true"></div>
  </div>
</div>
